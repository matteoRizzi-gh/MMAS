from mmas_classi import Graph, Ants, MMAS
import random as rd
import time
start_time = time.time()

city_count=30
graph = Graph(city_count)

#for i in range(city_count):
 #   for j in range(i, city_count):
  #     if i==j:
   #         graph.new_node(i,j, 0.0)
    #   else:
     #       number= rd.uniform(1, 100)
      #      graph.new_node(i,j, number)

distanze=[ [0.0, 93.36354735682785, 23.39670739376347, 76.60545893692341, 90.03736867076238, 79.73724586389686, 19.051529195262933, 70.78785723304762, 60.5393805539252, 94.18050205639737, 92.37767705047025, 77.81871150605082, 91.23239999269136, 37.08209197631815, 48.53983319712158, 15.723197790748308, 86.59362457667936, 30.649988758456654, 9.576683329303506, 68.41364291983928, 23.122982387699846, 11.289291874974268, 30.86395206933841, 95.20908103095961, 76.49478717527492, 29.031963969167887, 37.274169314006805, 59.310231806262415, 21.711443817782968, 75.41889228495643],
[93.36354735682785, 0.0, 4.392278065572347, 9.090420263675568, 36.44095341416243, 73.35340582056159, 16.02626559683359, 2.4799226111643575, 72.538360255253, 58.11652029415726, 94.9864038913147, 83.91004524783716, 9.66748639245431, 36.01202144013778, 19.012473557073907, 32.381518116644344, 75.83048098326927, 34.614993030990796, 9.867620695731835, 70.1195015151166, 89.94502027691763, 60.92033662048586, 87.75586041916118, 29.405031080912597, 9.998219008962813, 58.96865007953869, 59.065786668203685, 64.83206506585842, 56.04674695134695, 30.852091385575154],         
[23.39670739376347, 4.392278065572347, 0.0, 43.88732858640756, 55.310390452697284, 25.606371926200584, 69.14848731192131, 35.594885239712696, 63.763014305035725, 59.542715995492664, 48.74893715564246, 39.55979731188355, 13.310111512417897, 22.122221949935657, 36.240672804826985, 26.385488089889034, 92.53123553024206, 2.117453314592588, 19.450249978869916, 69.23624972594267, 99.28253237208287, 3.458654819550514, 60.78477119974839, 98.04519686450307, 38.9484709326984, 38.757027797144765, 76.69189043737437, 38.11842691187193, 8.218041564210933, 26.174297579434196],
[76.60545893692341, 9.090420263675568, 43.88732858640756, 0.0, 60.29250589975293, 3.7630603328735086, 89.6225457661533, 55.555019132975254, 33.40501509056646, 36.72613520165168, 32.05979233120716, 11.392090095727308, 97.4229323433127, 94.58405046830647, 8.894365291481764, 97.58290188440985, 28.58784945653017, 72.84757262951378, 15.489849260141005, 50.42033851646541, 14.488242735378364, 5.208010531974095, 48.398801031640595, 62.01287878679698, 75.9708856970693, 34.16847625704044, 44.24556220742859, 10.104054360644023, 79.54861954498614, 39.03076010751382],
[90.03736867076238, 36.44095341416243, 55.310390452697284, 60.29250589975293, 0.0, 77.00276735463399, 64.45880330105217, 35.632888316665, 92.86362214453379, 49.42200335793019, 57.69394481154173, 5.470115634076652, 93.785586801571, 67.62580790188366, 54.455111269286554, 8.355766777298832, 60.44325140051748, 59.041472601693975, 58.61605033936625, 94.52029614406109, 84.41371353554041, 67.55356495065432, 69.21977954644008, 43.27915981552096, 61.263120079853095, 27.389909120144328, 66.30065750802737, 94.68890486442822, 10.563798960340032, 1.2775792871943543],
[79.73724586389686, 73.35340582056159, 25.606371926200584, 3.7630603328735086, 77.00276735463399, 0.0, 99.60667223575483, 63.064522208932644, 96.99122735928405, 38.56844356508202, 72.29830502317489, 31.629904810756663, 12.046475401582963, 11.771642921093804, 39.78731010274729, 45.48214633568646, 26.022635364263728, 49.22566766346904, 4.666441902344925, 9.964859800237049, 81.13975448675511, 3.9550045634595588, 66.0598085415967, 94.65860604494733, 89.46331176599278, 71.14974472386996, 12.407633841213078, 82.92826665425453, 94.17470656559173, 8.876003378642414],
[19.051529195262933, 16.02626559683359, 69.14848731192131, 89.6225457661533, 64.45880330105217, 99.60667223575483, 0.0, 57.63957786027456, 70.35600602227109, 28.96167888043461, 54.036145481453595, 17.53147788675236, 59.97116857242842, 70.71697851243177, 91.56034249527306, 59.58769980287129, 85.56223230436318, 52.59289485801171, 52.224335131601414, 19.850889903589977, 47.7999914685791, 72.37706851386649, 60.036954259173626, 41.06289584174802, 5.301256027234764, 84.04285075363624, 35.14140432339797, 9.647028453224737, 7.679322059618569, 33.57269943373556],
[70.78785723304762, 2.4799226111643575, 35.594885239712696, 55.555019132975254, 35.632888316665, 63.064522208932644, 57.63957786027456, 0.0, 26.750118991359148, 71.58996536454929, 72.09439895133197, 35.83504149870755, 13.439750241596597, 16.507403440628128, 28.97130764145091, 99.52000261730907, 18.237021580991023, 73.06140782884592, 15.03117715814161, 56.78668607283635, 9.318822332505476, 10.553902548013346, 30.590710258904615, 48.1449592436168, 1.517756364393196, 71.23997350680096, 36.95646130625657, 51.95315432412367, 67.04204826486124, 48.295940648053346],
[60.5393805539252, 72.538360255253, 63.763014305035725, 33.40501509056646, 92.86362214453379, 96.99122735928405, 70.35600602227109, 26.750118991359148, 0.0, 87.89328641576179, 21.654879284947757, 81.76308521455348, 58.688119129720974, 51.451017935108275, 33.997946196900934, 84.06806756997874, 5.136402886370943, 69.96628189020058, 13.666601923641199, 2.4915043550148277, 25.205511745971737, 50.45018613713887, 74.3306112352852, 40.19346057583413, 63.40810133966356, 55.77059396308377, 81.16361234796118, 85.262482633077, 56.080509643757274, 24.506750921093822],
[94.18050205639737, 58.11652029415726, 59.542715995492664, 36.72613520165168, 49.42200335793019, 38.56844356508202, 28.96167888043461, 71.58996536454929, 87.89328641576179, 0.0, 70.59961374153798, 44.11245404389714, 41.63011395283992, 45.83564775306506, 95.09611741163718, 13.137005618525464, 17.29342043162007, 63.299041894088774, 99.64482932640567, 52.12933238602622, 30.83800313023319, 30.36533143316754, 26.087299444339592, 30.3659949055151, 48.80698853237925, 73.29469760390897, 17.644650587900017, 75.72776314570928, 52.61312731089696, 18.065339300840304],
[92.37767705047025, 94.9864038913147, 48.74893715564246, 32.05979233120716, 57.69394481154173, 72.29830502317489, 54.036145481453595, 72.09439895133197, 21.654879284947757, 70.59961374153798, 0.0, 54.24080637847473, 83.9185604212362, 23.038096476814857, 69.63664779159792, 45.56200411088848, 40.98517524913903, 69.04780077703057, 76.37839028532062, 86.80088166242977, 31.270639573187804, 46.043067640825306, 26.437154412871603, 57.94335518290558, 36.436421505056614, 26.62995691689455, 5.031382196203845, 42.201264441722266, 77.04139316000169, 79.58718416339914],
[77.81871150605082, 83.91004524783716, 39.55979731188355, 11.392090095727308, 5.470115634076652, 31.629904810756663, 17.53147788675236, 35.83504149870755, 81.76308521455348, 44.11245404389714, 54.24080637847473, 0.0, 74.01160192994892, 38.964295655841504, 2.5119494854832687, 58.950132919887125, 51.45203383066955, 75.7484045901772, 4.575308632359457, 57.32301885589091, 50.15219315675633, 9.49447358358129, 7.360199272923043, 66.66586292901816, 58.57560235810033, 88.00808317242809, 58.18162804820529, 4.788236911636465, 38.82622073905413, 1.749450103422789],
[91.23239999269136, 9.66748639245431, 13.310111512417897, 97.4229323433127, 93.785586801571, 12.046475401582963, 59.97116857242842, 13.439750241596597, 58.688119129720974, 41.63011395283992, 83.9185604212362, 74.01160192994892, 0.0, 95.77891943037744, 74.86637981200772, 57.29720915054509, 12.889306886107835, 11.03916689614249, 19.09578608873041, 79.27513151656876, 21.358245046932815, 60.40551288283376, 90.37914655215798, 17.394846814908405, 31.054907213091848, 48.07600862012975, 77.66093353671076, 84.20640710308813, 39.29410463567068, 86.0267987185982],
[37.08209197631815, 36.01202144013778, 22.122221949935657, 94.58405046830647, 67.62580790188366, 11.771642921093804, 70.71697851243177, 16.507403440628128, 51.451017935108275, 45.83564775306506, 23.038096476814857, 38.964295655841504, 95.77891943037744, 0.0, 95.70438745090408, 28.564327275940865, 83.67625644278598, 3.80688714857884, 72.09684568592772, 29.679524259993517, 62.12747688254242, 12.88790755139647, 26.609134954894348, 50.019203046978916, 30.172766955671076, 16.577110038996036, 14.670316811492565, 30.26364412835747, 63.850636854630075, 74.92304305814982],
[48.53983319712158, 19.012473557073907, 36.240672804826985, 8.894365291481764, 54.455111269286554, 39.78731010274729, 91.56034249527306, 28.97130764145091, 33.997946196900934, 95.09611741163718, 69.63664779159792, 2.5119494854832687, 74.86637981200772, 95.70438745090408, 0.0, 86.12416228163347, 68.30459796886099, 62.97029765424722, 32.921868875716655, 75.52867378194082, 89.93218810637084, 91.31303291812175, 19.8662391025006, 79.46416613774282, 85.5326271966111, 48.513628206474564, 95.871183921365, 32.32650385021266, 13.662241565287518, 1.8117115072555792],
[15.723197790748308, 32.381518116644344, 26.385488089889034, 97.58290188440985, 8.355766777298832, 45.48214633568646, 59.58769980287129, 99.52000261730907, 84.06806756997874, 13.137005618525464, 45.56200411088848, 58.950132919887125, 57.29720915054509, 28.564327275940865, 86.12416228163347, 0.0, 27.23764493072252, 88.13528044951092, 99.75027514696036, 54.20657136291875, 17.534900943405457, 67.07283418506037, 48.91269101951579, 92.7942969982856, 72.0417365546651, 42.19726380249879, 84.53650070703772, 41.20080990617247, 43.150281372244685, 91.50148242131924],
[86.59362457667936, 75.83048098326927, 92.53123553024206, 28.58784945653017, 60.44325140051748, 26.022635364263728, 85.56223230436318, 18.237021580991023, 5.136402886370943, 17.29342043162007, 40.98517524913903, 51.45203383066955, 12.889306886107835, 83.67625644278598, 68.30459796886099, 27.23764493072252, 0.0, 52.49744578088849, 99.45138295636977, 7.830810635638908, 77.36746420031514, 7.847699191421143, 51.67222067415464, 89.59423202955814, 88.47605973218008, 45.576752849941606, 86.98130953143709, 64.05927735686429, 26.28773421659958, 66.54552874697278],
[30.649988758456654, 34.614993030990796, 2.117453314592588, 72.84757262951378, 59.041472601693975, 49.22566766346904, 52.59289485801171, 73.06140782884592, 69.96628189020058, 63.299041894088774, 69.04780077703057, 75.7484045901772, 11.03916689614249, 3.80688714857884, 62.97029765424722, 88.13528044951092, 52.49744578088849, 0.0, 97.02030234839694, 22.07333914745317, 97.60003935341511, 63.866052499382775, 82.96427418343897, 31.59148968412074, 96.01711578486386, 9.913556492111862, 72.05958267283036, 25.62108681841861, 93.88485580189234, 68.53512995548816],
[9.576683329303506, 9.867620695731835, 19.450249978869916, 15.489849260141005, 58.61605033936625, 4.666441902344925, 52.224335131601414, 15.03117715814161, 13.666601923641199, 99.64482932640567, 76.37839028532062, 4.575308632359457, 19.09578608873041, 72.09684568592772, 32.921868875716655, 99.75027514696036, 99.45138295636977, 97.02030234839694, 0.0, 33.77505786079244, 43.50476700258536, 15.985005931887793, 59.57823876963209, 52.59089213463388, 45.006353561643465, 56.164278505446774, 20.66504052928269, 76.97918783540091, 79.67112985600087, 48.30735530129552],
[68.41364291983928, 70.1195015151166, 69.23624972594267, 50.42033851646541, 94.52029614406109, 9.964859800237049, 19.850889903589977, 56.78668607283635, 2.4915043550148277, 52.12933238602622, 86.80088166242977, 57.32301885589091, 79.27513151656876, 29.679524259993517, 75.52867378194082, 54.20657136291875, 7.830810635638908, 22.07333914745317, 33.77505786079244, 0.0, 13.424232856587974, 5.245555650401562, 68.62855512068312, 21.492454560211502, 63.423180316117815, 52.820143313238304, 58.76941093780178, 25.988984177684983, 97.39798373493582, 97.25315700819053],
[23.122982387699846, 89.94502027691763, 99.28253237208287, 14.488242735378364, 84.41371353554041, 81.13975448675511, 47.7999914685791, 9.318822332505476, 25.205511745971737, 30.83800313023319, 31.270639573187804, 50.15219315675633, 21.358245046932815, 62.12747688254242, 89.93218810637084, 17.534900943405457, 77.36746420031514, 97.60003935341511, 43.50476700258536, 13.424232856587974, 0.0, 96.54375849438254, 41.520168897828995, 47.48412199528522, 10.574601580716001, 67.86508257251272, 60.905390099411235, 92.12697717993157, 51.54746760229265, 28.590771053297154],
[11.289291874974268, 60.92033662048586, 3.458654819550514, 5.208010531974095, 67.55356495065432, 3.9550045634595588, 72.37706851386649, 10.553902548013346, 50.45018613713887, 30.36533143316754, 46.043067640825306, 9.49447358358129, 60.40551288283376, 12.88790755139647, 91.31303291812175, 67.07283418506037, 7.847699191421143, 63.866052499382775, 15.985005931887793, 5.245555650401562, 96.54375849438254, 0.0, 53.97873683453479, 22.003454324149107, 85.64299680072142, 8.509478471308451, 10.910569977767178, 17.921027693142673, 80.08527218408248, 53.03323532096534],
[30.86395206933841, 87.75586041916118, 60.78477119974839, 48.398801031640595, 69.21977954644008, 66.0598085415967, 60.036954259173626, 30.590710258904615, 74.3306112352852, 26.087299444339592, 26.437154412871603, 7.360199272923043, 90.37914655215798, 26.609134954894348, 19.8662391025006, 48.91269101951579, 51.67222067415464, 82.96427418343897, 59.57823876963209, 68.62855512068312, 41.520168897828995, 53.97873683453479, 0.0, 77.30908169616266, 37.50480705825685, 41.350355574853126, 40.95398938209592, 38.729905880734194, 90.7624109822745, 33.29598461052022],
[95.20908103095961, 29.405031080912597, 98.04519686450307, 62.01287878679698, 43.27915981552096, 94.65860604494733, 41.06289584174802, 48.1449592436168, 40.19346057583413, 30.3659949055151, 57.94335518290558, 66.66586292901816, 17.394846814908405, 50.019203046978916, 79.46416613774282, 92.7942969982856, 89.59423202955814, 31.59148968412074, 52.59089213463388, 21.492454560211502, 47.48412199528522, 22.003454324149107, 77.30908169616266, 0.0, 29.55425103014802, 88.65534800798264, 51.10666888271727, 49.70665682391458, 91.34059716210787, 15.665973060126639],
[76.49478717527492, 9.998219008962813, 38.9484709326984, 75.9708856970693, 61.263120079853095, 89.46331176599278, 5.301256027234764, 1.517756364393196, 63.40810133966356, 48.80698853237925, 36.436421505056614, 58.57560235810033, 31.054907213091848, 30.172766955671076, 85.5326271966111, 72.0417365546651, 88.47605973218008, 96.01711578486386, 45.006353561643465, 63.423180316117815, 10.574601580716001, 85.64299680072142, 37.50480705825685, 29.55425103014802, 0.0, 58.18862600338201, 86.58279798323635, 8.946166575539749, 50.106983254067444, 90.03590365139249],
[29.031963969167887, 58.96865007953869, 38.757027797144765, 34.16847625704044, 27.389909120144328, 71.14974472386996, 84.04285075363624, 71.23997350680096, 55.77059396308377, 73.29469760390897, 26.62995691689455, 88.00808317242809, 48.07600862012975, 16.577110038996036, 48.513628206474564, 42.19726380249879, 45.576752849941606, 9.913556492111862, 56.164278505446774, 52.820143313238304, 67.86508257251272, 8.509478471308451, 41.350355574853126, 88.65534800798264, 58.18862600338201, 0.0, 2.7615670428285197, 10.98705011209594, 40.58103238646598, 69.39478451755907],
[37.274169314006805, 59.065786668203685, 76.69189043737437, 44.24556220742859, 66.30065750802737, 12.407633841213078, 35.14140432339797, 36.95646130625657, 81.16361234796118, 17.644650587900017, 5.031382196203845, 58.18162804820529, 77.66093353671076, 14.670316811492565, 95.871183921365, 84.53650070703772, 86.98130953143709, 72.05958267283036, 20.66504052928269, 58.76941093780178, 60.905390099411235, 10.910569977767178, 40.95398938209592, 51.10666888271727, 86.58279798323635, 2.7615670428285197, 0.0, 37.64674245210334, 23.00586337567978, 37.63514111329275],
[59.310231806262415, 64.83206506585842, 38.11842691187193, 10.104054360644023, 94.68890486442822, 82.92826665425453, 9.647028453224737, 51.95315432412367, 85.262482633077, 75.72776314570928, 42.201264441722266, 4.788236911636465, 84.20640710308813, 30.26364412835747, 32.32650385021266, 41.20080990617247, 64.05927735686429, 25.62108681841861, 76.97918783540091, 25.988984177684983, 92.12697717993157, 17.921027693142673, 38.729905880734194, 49.70665682391458, 8.946166575539749, 10.98705011209594, 37.64674245210334, 0.0, 33.97879785061271, 72.31698146258962],
[21.711443817782968, 56.04674695134695, 8.218041564210933, 79.54861954498614, 10.563798960340032, 94.17470656559173, 7.679322059618569, 67.04204826486124, 56.080509643757274, 52.61312731089696, 77.04139316000169, 38.82622073905413, 39.29410463567068, 63.850636854630075, 13.662241565287518, 43.150281372244685, 26.28773421659958, 93.88485580189234, 79.67112985600087, 97.39798373493582, 51.54746760229265, 80.08527218408248, 90.7624109822745, 91.34059716210787, 50.106983254067444, 40.58103238646598, 23.00586337567978, 33.97879785061271, 0.0, 79.4828971572101],
[75.41889228495643, 30.852091385575154, 26.174297579434196, 39.03076010751382, 1.2775792871943543, 8.876003378642414, 33.57269943373556, 48.295940648053346, 24.506750921093822, 18.065339300840304, 79.58718416339914, 1.749450103422789, 86.0267987185982, 74.92304305814982, 1.8117115072555792, 91.50148242131924, 66.54552874697278, 68.53512995548816, 48.30735530129552, 97.25315700819053, 28.590771053297154, 53.03323532096534, 33.29598461052022, 15.665973060126639, 90.03590365139249, 69.39478451755907, 37.63514111329275, 72.31698146258962, 79.4828971572101, 0.0],
]
for i in range(city_count):
   for j in range(i + 1, city_count):
       graph.new_node(i, j, distanze[i][j])

distance_matrix=distanze
#distance_matrix = graph.distance_matrix

#for row in distance_matrix:
 # print(row)
  


    #mi serve un istanza ant per costruire il primo tour possibile
ants_1 = Ants(distanze, alpha=1.0, beta=2.0)
pheromone_matrix = [[1.0] * city_count for _ in range(city_count)]


ants_1.construct_tour(pheromone_matrix)
tour_lenght= ants_1.tour_length()

print("Tour Length: ", tour_lenght)
  
   
for i in range(0, 1):

    #a partire dal primo tour possibile creato dalla classe ant, costruisco iterativamente i tour 
    #rispetto all'iteration-best

    mmas_solver=MMAS(
        city_num=city_count, alpha=1.0, beta=2.0, rho=0.4, q0=0.001, distance_matrix=distance_matrix, 
        max_iteration=500, max_trail=1.0, min_trail=0.01, max_pheromone =1.0
        )

    best_tour_length, best_tour = mmas_solver.solve()
    print("Best Tour Length:", best_tour_length)
    print("Best Tour:", best_tour)
    print(" ")


end_time = time.time()
execution_time = end_time - start_time



print("Tempo impiegato:", execution_time, "secondi")

